<link href="/assets/css/bootstrap-2.min.css" rel="stylesheet">

<!-- Template Stylesheet -->
<link href="/assets/css/style3.css" rel="stylesheet">
<div class="container-fluid position-relative d-flex p-0">
    <div class="container-fluid">
        <div class="row">
            <div class="col-12 col-lg-12 mt-5">
                <div class="container-fluid">
                    <div class="row">
                        {{!-- <a href="/admin/add-product" class="btn btn-dark ml-auto mb-4" style="width: 130px;">Add
                            Product</a> --}}
                    </div>
                </div>

            </div>
        </div>
        <section id="add" class="p-5">
            <div class="half">
                <div class="bg order-1 order-md-2" style="background-image: url('/adminLogin/images/bg_1.jpg');"></div>

                <div class="contents order-2 order-md-1">
                    <div class="container">
                        <div class="row align-items-center justify-content-center">
                            <div class="col-md-12">
                                <div class="col-md-6">
                                    <div class="form-block" id="cat">
                                        <div class="text-center mb-5">
                                            <div class="">
                                                <a href="/admin/product-offers" class=""
                                                    style="padding-left: 17rem;"><i
                                                        class="fa fa-times text-danger fa-3x"
                                                        aria-hidden="true"></i></a>
                                            </div>
                                            <h1><u>Edit Product <strong>Offers</strong></u></h1>
                                            {{#if catErr}}
                                            <p class="text-center text-danger">{{catErr}}</p>
                                            {{/if}}
                                        </div>
                                        {{!-- <form action="/admin/add-coupon" id="productPage" method="post"> --}}
                                            {{!-- {{#if couponExist}}
                                            <p class="text-danger">{{couponExist}}</p>
                                    </div>
                                    {{/if}} --}}
                                    {{!-- {{#if couponExist}}
                                    <div class="alert alert-danger" role="alert">
                                        This Coupon is already exist!
                                    </div>
                                    {{/if}} --}}
                                    {{!-- <div class="form-group first">
                                        <label>Coupon code</label>
                                        <input type="text" class="form-control" required name="coupon">
                                        <label class="pt-4">Starting Date</label>
                                        <input type="Date" class="form-control" required name="starting" id="str">
                                        <label class="pt-4">Expiry Date</label>
                                        <input type="Date" class="form-control" required name="expiry" id="exp">
                                        <label class="pt-4">Coupon Percentage</label>
                                        <input type="text" class="form-control" required min="1" name="offer" max="95"
                                            --}} {{!-- onkeypress="return isNumber(event)/" --}} {{!-- </div>
                                        <input type="submit" value="Add" id="prosub" class="btn btn-block btn-dark">

                                        </form> --}}
                                        <form action="/admin/edit-product-offer/{{proOfferDetails._id}}"
                                            id="productPage" method="post">
                                            {{#if proOfferExist}}
                                            <div class="alert alert-danger" role="alert">
                                                A offer for this product already Exist!
                                            </div>
                                            {{/if}}
                                            <div class="form-group first">
                                                {{!-- <label for="proList">Product List</label> --}}
                                                {{!-- <input list="products" name="product" class="form-control"
                                                    autocomplete="off" --}} {{!-- id="product"> --}}
                                                {{!-- <datalist id="products"> --}}
                                                    {{!-- {{#each allProducts}} --}}
                                                    {{!-- <option value="{{proOfferDetails.product}}  " selected> --}}
                                                        {{!-- {{/each}} --}}
                                                        {{!-- </datalist> --}}
                                                {{#if proErr}}
                                                <p class="text-center text-danger">{{proErr}}</p>
                                                {{/if}}

                                                <label class="pt-4">Product</label>
                                                <input type="text" value="{{proOfferDetails.product}}"
                                                    class="form-control" required readonly name="product">

                                                <label class="pt-4">Starting Date</label>
                                                <input type="Date" value="{{proOfferDetails.starting}}"
                                                    class="form-control" required name="starting" id="str">
                                                <label class="pt-4">Expiry Date</label>
                                                <input type="Date" value="{{proOfferDetails.expiry}}"
                                                    class="form-control" required name="expiry" id="exp">
                                                <label class="pt-4">Offer Percentage</label>
                                                <input type="text" value="{{proOfferDetails.proOfferPercentage}}"
                                                    id="proOfferPercentage" onkeyup="validatePercentage()"
                                                    class="form-control" name="proOfferPercentage">
                                                <span id="percentage-error"></span>

                                            </div>
                                            <input type="submit" value="Upadate" id="prosub"
                                                class="btn btn-block btn-dark">
                                        </form>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </div>
</div>
</div>
</div>
<script>
    var percentageError = document.getElementById('percentage-error')

    function validatePercentage() {
        var percentage = document.getElementById('proOfferPercentage').value.trim();

        if (percentage > 95 || percentage.length == 0) {
            percentageError.innerHTML = "Value must be less than 95"
            percentageError.style.color = "red";
            return false;
        }
        percentageError.innerHTML = 'valid';
        percentageError.style.color = 'green'
        return true;
    }
    $(document).on("submit", "form", function (e) {
        validatePercentage()
        if (validatePercentage()) {

        } else {
            e.preventDefault();
            swal.fire('Invalid data!');
            return false;
        }
    })
</script>